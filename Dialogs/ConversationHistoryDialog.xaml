<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="KAIROS.Dialogs.ConversationHistoryDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Conversation History"
    PrimaryButtonText="Load Selected"
    CloseButtonText="Cancel"
    DefaultButton="Primary"
    MinWidth="600"
    MinHeight="500">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Search Box -->
        <Grid Grid.Row="0" Margin="0,0,0,16">
            <TextBox x:Name="SearchBox"
                     PlaceholderText="Search conversations..."
                     TextChanged="SearchBox_TextChanged">
                <TextBox.Resources>
                    <Thickness x:Key="TextBoxBorderThemeThickness">1</Thickness>
                </TextBox.Resources>
            </TextBox>
            <FontIcon Glyph="&#xE721;" 
                      FontSize="16"
                      Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                      HorizontalAlignment="Right"
                      Margin="0,0,12,0"
                      VerticalAlignment="Center"
                      IsHitTestVisible="False"/>
        </Grid>

        <!-- Conversations List -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel x:Name="ConversationsPanel" Spacing="8">
                <!-- Conversation items will be added here -->
            </StackPanel>
        </ScrollViewer>

        <!-- No Results Message -->
        <TextBlock x:Name="NoResultsTextBlock"
                   Grid.Row="1"
                   Text="No conversations found."
                   Style="{StaticResource BodyTextBlockStyle}"
                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Visibility="Collapsed"/>

        <!-- Loading Indicator -->
        <ProgressRing x:Name="LoadingRing"
                      Grid.Row="1"
                      IsActive="True"
                      Width="50"
                      Height="50"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"/>
    </Grid>
</ContentDialog>
